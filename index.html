<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Gauvel</title>

	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet" />

	<!-- Styles -->
	<link rel="stylesheet" href="styles.css" />

	<style>
		/* SPA transition styling */
		#checkoutContainer {
			transition: all 0.4s ease;
			opacity: 0;
			transform: translateY(30px);
			display: none;
		}
		#checkoutContainer.visible {
			display: block;
			opacity: 1;
			transform: translateY(0);
		}
	</style>
</head>
<body>
	<!-- Navigation -->
	<nav class="navbar">
		<div class="navbar__container">
			<a href="#home" class="navbar__logo uppercase">GAUVEL</a>
			<ul class="navbar__menu">
				<li><a href="#home" class="navbar__links uppercase">Home</a></li>
				<li><a href="products.html" class="navbar__links uppercase">Fragrances</a></li>
				<li><a href="contact.html" class="navbar__links uppercase">Contact</a></li>
			</ul>
			<div class="navbar__actions">
				<a href="signup.html" class="auth-button uppercase" id="authButton">Sign In/Sign Up</a>
				<button id="cartButton" class="cart-button" onclick="openCart()">
					<img src="cart.png" alt="cart" />
					<span id="cartCount" class="cart-count">0</span>
				</button>
			</div>
		</div>
	</nav>

	<div id="cartOverlay" onclick="closeCart()"></div>
	<div class="cart-panel">
		<h2 class="cart-title">Shopping Cart</h2>
		<div class="cart-content"></div>
		<div class="cart-actions">
			<button class="checkout-btn-mini" onclick="openCheckout()">CHECKOUT
			<a href="checkout.html"</a>
			</button>
		</div>
		<button class="cart-close-btn" onclick="closeCart()">×</button>
	</div>

	<!-- Home Section -->
	<section id="home" class="hero">
		<div class="hero__content">
			<p class="hero__subtitle uppercase mono">EST. 2022</p>
			<h1 class="hero__title">GAUVEL</h1>
			<p class="hero__description">
				A perfume brand that is inspired by<br />
				philosophy, craftsmanship, and exclusivity.
			</p>
		</div>
	</section>

	<!-- About Section -->
	<section id="about" class="about">
		<div class="section-container">
			<div class="about__content">
				<div class="about__text">
					<p class="about__subtitle uppercase mono">PHILOSOPHY</p>
					<h2 class="about__title">Perfumery with Purpose</h2>
					<p class="about__description">
						At GAUVEL, we see fragrance as more than something you wear — it’s a quiet companion in your daily 
						life. A way to care for yourself, to express your inner world, and to stay connected to what 
						matters most. 
					</p>
					<p class="about__description">
						Every scent in our collection, whether sweet, fresh, earthy, or light, is chosen with intention. 
						We offer more than perfume; we offer reminders. To slow down. To choose with care. To honor 
						what resonates with you. 
					</p>
				</div>
				<div class="about__manifesto">
					<h3 class="manifesto__title uppercase mono">OUR MANIFESTO</h3>
					<p class="manifesto__text">
						"Luxury is not about the price. It’s about choosing what aligns with you, thoughtfully, creatively, 
						and with purpose. GAUVEL exists to support that journey, offering scents that feel like a form 
						of self-care, a creative expression, and a guide toward greater awareness. 
						GAUVEL Fragrance that supports, inspires, and reflects."
					</p>
				</div>
			</div>
		</div>
	</section>

	<!-- Checkout content dynamically loaded here -->
	<div id="checkoutContainer"></div>

	<!-- Firebase + Script -->
	<script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-app-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-auth-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore-compat.js"></script>
	<script src="script.js" defer></script>

	<!-- SPA / Checkout loader script -->
	<script>
		let cachedCheckout = null;

		function openCheckout() {
			// Hide other sections
			document.getElementById('home').style.display = 'none';
			document.getElementById('about').style.display = 'none';
			document.querySelector('.cart-panel').style.display = 'none';
			document.getElementById('cartOverlay').style.display = 'none';

			const checkout = document.getElementById('checkoutContainer');

			// Load once and reuse (caching)
			if (cachedCheckout) {
				checkout.innerHTML = cachedCheckout;
				checkout.classList.add('visible');
				initCheckoutScript(); // reloads logic
				return;
			}

			fetch('checkout.html')
				.then(response => response.text())
				.then(html => {
					cachedCheckout = html;
					checkout.innerHTML = html;
					checkout.classList.add('visible');
					initCheckoutScript();
				})
				.catch(error => {
					console.error('Failed to load checkout:', error);
					checkout.innerHTML = "<p>Failed to load checkout page.</p>";
				});
		}

		function initCheckoutScript() {
			// Insert <script> manually since innerHTML won't execute them
			const script = document.createElement('script');
			script.textContent = `
				document.addEventListener('DOMContentLoaded', function () {
					const product = JSON.parse(localStorage.getItem('checkoutProduct'));
					if (!product) return;
					document.getElementById('product-name').textContent = product.name;
					document.getElementById('product-size').textContent = product.size;
					document.getElementById('product-description').textContent = product.description;
					document.getElementById('product-price').textContent = \`₱\${product.price.toFixed(2)}\`;
					const imageElem = document.querySelector('#product-image img');
					if (product.image) {
						imageElem.src = product.image;
						imageElem.style.display = 'block';
					}
					const tax = product.price * 0.08;
					const total = product.price + tax;
					document.getElementById('subtotal').textContent = \`₱\${product.price.toFixed(2)}\`;
					document.getElementById('tax').textContent = \`₱\${tax.toFixed(2)}\`;
					document.getElementById('total').textContent = \`₱\${total.toFixed(2)}\`;
				});
				function proceedToPayment() {
					alert('Redirecting to secure payment...');
				}
			`;
			document.body.appendChild(script);
		}
	</script>
</body>
</html>
